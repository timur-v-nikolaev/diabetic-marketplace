import mongoose from 'mongoose';

const MONGODB_URI = process.env.MONGODB_URI || 'mongodb://mongodb:27017/diabetic-marketplace';

// –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–æ–≤–∞—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ thediabetica.com + —Ä–µ–∞–ª—å–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
const categories = {
  '–ì–ª—é–∫–æ–º–µ—Ç—Ä—ã –∏ —Ç–µ—Å—Ç-–ø–æ–ª–æ—Å–∫–∏': [
    { name: '–ì–ª—é–∫–æ–º–µ—Ç—Ä –î–∂–∏–º–µ–π—Ç –õ–∞–π—Ñ', priceRange: [1200, 1800] },
    { name: '–ì–ª—é–∫–æ–º–µ—Ç—Ä –î–∏–∞–∫–æ–Ω—Ç –ö–æ–Ω—Ü–µ–ø—Ç', priceRange: [1500, 2200] },
    { name: '–ì–ª—é–∫–æ–º–µ—Ç—Ä –ê–∫–∫—É-–ß–µ–∫ –ü–µ—Ä—Ñ–æ—Ä–º–∞', priceRange: [1800, 2500] },
    { name: '–ì–ª—é–∫–æ–º–µ—Ç—Ä –ö–æ–Ω—Ç—É—Ä –¢–°', priceRange: [1400, 2000] },
    { name: '–ì–ª—é–∫–æ–º–µ—Ç—Ä –£–∞–Ω–¢–∞—á –°–µ–ª–µ–∫—Ç –ü–ª—é—Å', priceRange: [1600, 2300] },
    { name: '–¢–µ—Å—Ç-–ø–æ–ª–æ—Å–∫–∏ –î–∏–∞–∫–æ–Ω—Ç ‚Ññ50', priceRange: [450, 650] },
    { name: '–¢–µ—Å—Ç-–ø–æ–ª–æ—Å–∫–∏ –î–∂–∏–º–µ–π—Ç –õ–∞–π—Ñ ‚Ññ50', priceRange: [500, 700] },
    { name: '–¢–µ—Å—Ç-–ø–æ–ª–æ—Å–∫–∏ –£–∞–Ω–¢–∞—á –°–µ–ª–µ–∫—Ç ‚Ññ50', priceRange: [550, 750] },
    { name: '–¢–µ—Å—Ç-–ø–æ–ª–æ—Å–∫–∏ –ö–æ–Ω—Ç—É—Ä –ü–ª—é—Å ‚Ññ50', priceRange: [580, 780] },
    { name: '–¢–µ—Å—Ç-–ø–æ–ª–æ—Å–∫–∏ –ê–∫–∫—É-–ß–µ–∫ –ü–µ—Ä—Ñ–æ—Ä–º–∞ ‚Ññ50', priceRange: [650, 850] },
    { name: '–õ–∞–Ω—Ü–µ—Ç—ã –ú–∏–∫—Ä–æ–ª–µ—Ç ‚Ññ200', priceRange: [350, 500] },
    { name: '–ü—Ä–æ–∫–∞–ª—ã–≤–∞—Ç–µ–ª—å –ê–∫–∫—É-–ß–µ–∫ –°–æ—Ñ—Ç–∫–ª–∏–∫—Å', priceRange: [250, 400] },
  ],
  '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏': [
    { name: '–®–ø—Ä–∏—Ü-—Ä—É—á–∫–∞ –í–æ–∑—É–ª–∏–º –ü–µ–Ω –†–æ—è–ª', priceRange: [2200, 3500] },
    { name: '–®–ø—Ä–∏—Ü-—Ä—É—á–∫–∞ –ù–æ–≤–æ–ü–µ–Ω 5', priceRange: [2500, 3800] },
    { name: '–®–ø—Ä–∏—Ü-—Ä—É—á–∫–∞ –û–ø—Ç–∏–∫–ª–∏–∫—Å', priceRange: [2000, 3200] },
    { name: '–ö–∞—Ä—Ç—Ä–∏–¥–∂ 3,15 –º–ª –ê–∫–∫—É-–ß–µ–∫ –°–ø–∏—Ä–∏—Ç', priceRange: [250, 400] },
    { name: '–ò–≥–ª—ã –¥–ª—è —à–ø—Ä–∏—Ü-—Ä—É—á–µ–∫ –ú–∏–∫—Ä–æ—Ñ–∞–π–Ω 4–º–º ‚Ññ100', priceRange: [800, 1200] },
    { name: '–ò–≥–ª—ã –ù–æ–≤–æ—Ñ–∞–π–Ω 6–º–º ‚Ññ100', priceRange: [850, 1300] },
    { name: '–ò–≥–ª—ã BD Micro-Fine 5–º–º ‚Ññ100', priceRange: [900, 1400] },
    { name: '–ò–Ω—Ñ—É–∑–∏–æ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä Quick-Set MMT-399', priceRange: [1500, 2200] },
    { name: '–®–ø—Ä–∏—Ü –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π 1–º–ª U-100 ‚Ññ10', priceRange: [150, 250] },
  ],
  '–°–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞': [
    { name: '–°–µ–Ω—Å–æ—Ä –§—Ä–∏—Å—Ç–∞–π–ª –õ–∏–±—Ä–µ 1', priceRange: [4500, 6000] },
    { name: '–°–µ–Ω—Å–æ—Ä –§—Ä–∏—Å—Ç–∞–π–ª –õ–∏–±—Ä–µ 2', priceRange: [5000, 6500] },
    { name: '–°–µ–Ω—Å–æ—Ä –§—Ä–∏—Å—Ç–∞–π–ª –õ–∏–±—Ä–µ 3', priceRange: [5500, 7000] },
    { name: '–¢—Ä–∞–Ω—Å–º–∏—Ç—Ç–µ—Ä –î–µ–∫—Å–∫–æ–º G6', priceRange: [8000, 12000] },
    { name: '–°–µ–Ω—Å–æ—Ä –î–µ–∫—Å–∫–æ–º G6 (3 —à—Ç)', priceRange: [6500, 9000] },
    { name: '–†–∏–¥–µ—Ä –§—Ä–∏—Å—Ç–∞–π–ª –õ–∏–±—Ä–µ', priceRange: [3500, 4500] },
    { name: '–ù–∞–±–æ—Ä –î–µ–∫—Å–∫–æ–º G6 (—Ç—Ä–∞–Ω—Å–º–∏—Ç—Ç–µ—Ä + 3 —Å–µ–Ω—Å–æ—Ä–∞)', priceRange: [14000, 18000] },
  ],
  '–ò–Ω—Å—É–ª–∏–Ω–æ–≤—ã–µ –ø–æ–º–ø—ã': [
    { name: '–ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –ø–æ–º–ø–∞ –ú–µ–¥—Ç—Ä–æ–Ω–∏–∫ MiniMed 640G', priceRange: [85000, 120000] },
    { name: '–ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –ø–æ–º–ø–∞ –ê–∫–∫—É-–ß–µ–∫ –ö–æ–º–±–æ', priceRange: [75000, 110000] },
    { name: '–ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞—è –ø–æ–º–ø–∞ –û–º–Ω–∏–ø–æ–¥ Dash', priceRange: [95000, 135000] },
    { name: '–†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏ –¥–ª—è –ø–æ–º–ø—ã –ú–µ–¥—Ç—Ä–æ–Ω–∏–∫ (–∫–æ–º–ø–ª–µ–∫—Ç)', priceRange: [4500, 6500] },
    { name: '–†–µ–∑–µ—Ä–≤—É–∞—Ä –¥–ª—è –ø–æ–º–ø—ã 3–º–ª (10 —à—Ç)', priceRange: [2200, 3200] },
  ],
  '–£—Ö–æ–¥ –∑–∞ –∫–æ–∂–µ–π': [
    { name: '–ö—Ä–µ–º –ü—Ä–µ–≤–µ–Ω—Ç–∏–Ω –¥–ª—è —Ç–µ–ª–∞ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É—é—â–∏–π', priceRange: [250, 380] },
    { name: '–ù–∞–±–æ—Ä –∫—Ä–µ–º–∞ –ü—Ä–µ–≤–µ–Ω—Ç–∏–Ω –¥–ª—è —Ç–µ–ª–∞ 3 —à—Ç—É–∫–∏', priceRange: [650, 850] },
    { name: '–ö—Ä–µ–º –¥–ª—è –Ω–æ–≥ –î–∏–∞—É–ª—å—Ç—Ä–∞–¥–µ—Ä–º', priceRange: [300, 450] },
    { name: '–ö—Ä–µ–º –¥–ª—è –Ω–æ–≥ Gehwol Med', priceRange: [850, 1200] },
    { name: '–ë–∞–ª—å–∑–∞–º –¥–ª—è –≥—É–± –î–∏–∞–±–∞–ª–∫–µ–∞', priceRange: [180, 280] },
    { name: '–ö—Ä–µ–º –¥–ª—è —Ä—É–∫ –∑–∞—â–∏—Ç–Ω—ã–π DiaDerm', priceRange: [220, 350] },
    { name: '–õ–æ—Å—å–æ–Ω –¥–ª—è —Ç–µ–ª–∞ —É–≤–ª–∞–∂–Ω—è—é—â–∏–π Eucerin', priceRange: [650, 950] },
    { name: '–ú–∞–∑—å –¥–ª—è –∑–∞–∂–∏–≤–ª–µ–Ω–∏—è —Ä–∞–Ω –ê–∫—Ç–æ–≤–µ–≥–∏–Ω', priceRange: [450, 750] },
  ],
  '–ì–∏–≥–∏–µ–Ω–∞ –ø–æ–ª–æ—Å—Ç–∏ —Ä—Ç–∞': [
    { name: '–ó—É–±–Ω–∞—è –ø–∞—Å—Ç–∞ –ü—Ä–µ–≤–µ–Ω—Ç–∏–Ω –î–ò–ê –ê–∫—Ç–∏–≤, –º—è—Ç–∞, 75 –º–ª', priceRange: [280, 380] },
    { name: '–ó—É–±–Ω–∞—è –ø–∞—Å—Ç–∞ –ü—Ä–µ–≤–µ–Ω—Ç–∏–Ω –î–ò–ê –ê–∫—Ç–∏–≤, –≥—Ä–µ–π–ø—Ñ—Ä—É—Ç, 75 –º–ª', priceRange: [280, 380] },
    { name: '–ù–∞–±–æ—Ä –∑—É–±–Ω–æ–π –ø–∞—Å—Ç—ã –ü—Ä–µ–≤–µ–Ω—Ç–∏–Ω –î–ò–ê –ê–∫—Ç–∏–≤ 2 —à—Ç—É–∫–∏', priceRange: [520, 640] },
    { name: '–û–ø–æ–ª–∞—Å–∫–∏–≤–∞—Ç–µ–ª—å –¥–ª—è –ø–æ–ª–æ—Å—Ç–∏ —Ä—Ç–∞ –î–∏–∞–±–µ—Ç–∏–∫', priceRange: [250, 380] },
    { name: '–ó—É–±–Ω–∞—è —â–µ—Ç–∫–∞ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è Oral-B', priceRange: [2200, 3500] },
  ],
  '–°–ø–µ—Ü. –ø–∏—Ç–∞–Ω–∏–µ': [
    { name: '–°–æ–∫ –î–ò–ê–µ—à–∫–∞ —è–±–ª–æ—á–Ω—ã–π 0,2–ª (—É–ø–∞–∫–æ–≤–∫–∞ 15 —à—Ç)', priceRange: [450, 650] },
    { name: '–°–æ–∫ –î–ò–ê–µ—à–∫–∞ —Ç–æ–º–∞—Ç–Ω—ã–π 0,2–ª (—É–ø–∞–∫–æ–≤–∫–∞ 15 —à—Ç)', priceRange: [450, 650] },
    { name: '–ë–∞—Ç–æ–Ω—á–∏–∫ –º—é—Å–ª–∏ –¥–∏–∞–±–µ—Ç–∏—á–µ—Å–∫–∏–π —Å –æ—Ä–µ—Ö–∞–º–∏ (—É–ø–∞–∫–æ–≤–∫–∞ 20 —à—Ç)', priceRange: [850, 1200] },
    { name: '–ü–µ—á–µ–Ω—å–µ –æ–≤—Å—è–Ω–æ–µ –¥–∏–∞–±–µ—Ç–∏—á–µ—Å–∫–æ–µ 200–≥', priceRange: [120, 200] },
    { name: '–®–æ–∫–æ–ª–∞–¥ —Ç–µ–º–Ω—ã–π –±–µ–∑ —Å–∞—Ö–∞—Ä–∞ 90–≥', priceRange: [180, 280] },
    { name: '–ö–æ–Ω—Ñ–µ—Ç—ã –¥–∏–∞–±–µ—Ç–∏—á–µ—Å–∫–∏–µ –∞—Å—Å–æ—Ä—Ç–∏ 200–≥', priceRange: [250, 380] },
    { name: '–î–∂–µ–º –±–µ–∑ —Å–∞—Ö–∞—Ä–∞ –∞—Å—Å–æ—Ä—Ç–∏ 230–≥', priceRange: [180, 300] },
    { name: '–ü—Ä–æ—Ç–µ–∏–Ω–æ–≤—ã–π –±–∞—Ç–æ–Ω—á–∏–∫ –Ω–∏–∑–∫–æ—É–≥–ª–µ–≤–æ–¥–Ω—ã–π (20 —à—Ç)', priceRange: [950, 1400] },
  ],
  '–í–∏—Ç–∞–º–∏–Ω—ã –∏ –ë–ê–î—ã': [
    { name: '–ê–ª—å—Ñ–∞-–ª–∏–ø–æ–µ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞ 600–º–≥ ‚Ññ30', priceRange: [450, 650] },
    { name: '–í–∏—Ç–∞–º–∏–Ω—ã –≥—Ä—É–ø–ø—ã B –∫–æ–º–ø–ª–µ–∫—Å ‚Ññ60', priceRange: [380, 550] },
    { name: '–•—Ä–æ–º –ø–∏–∫–æ–ª–∏–Ω–∞—Ç 200–º–∫–≥ ‚Ññ100', priceRange: [320, 480] },
    { name: '–ú–∞–≥–Ω–∏–π B6 —Ñ–æ—Ä—Ç–µ ‚Ññ60', priceRange: [350, 520] },
    { name: '–û–º–µ–≥–∞-3 —Ä—ã–±–∏–π –∂–∏—Ä ‚Ññ90', priceRange: [550, 780] },
    { name: '–ö–æ–º–ø–ª–∏–≤–∏—Ç –î–∏–∞–±–µ—Ç ‚Ññ60', priceRange: [380, 520] },
    { name: '–î–∏–∞–±–µ–Ω–æ—Ç (–∫–æ–Ω—Ç—Ä–æ–ª—å —Å–∞—Ö–∞—Ä–∞) ‚Ññ60', priceRange: [850, 1200] },
  ],
};

// –ì–æ—Ä–æ–¥–∞ –†–æ—Å—Å–∏–∏ –∏ –°–ù–ì
const cities = [
  '–ú–æ—Å–∫–≤–∞', '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', '–ö–∞–∑–∞–Ω—å', '–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥', '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥',
  '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', '–ß–µ–ª—è–±–∏–Ω—Å–∫', '–°–∞–º–∞—Ä–∞', '–£—Ñ–∞', '–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É',
  '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–í–æ—Ä–æ–Ω–µ–∂', '–ü–µ—Ä–º—å', '–í–æ–ª–≥–æ–≥—Ä–∞–¥', '–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫',
  '–°–∞—Ä–∞—Ç–æ–≤', '–¢—é–º–µ–Ω—å', '–ò–∂–µ–≤—Å–∫', '–ë–∞—Ä–Ω–∞—É–ª', '–£–ª—å—è–Ω–æ–≤—Å–∫',
  '–ò—Ä–∫—É—Ç—Å–∫', '–•–∞–±–∞—Ä–æ–≤—Å–∫', '–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫', '–ú–∏–Ω—Å–∫', '–ê–ª–º–∞—Ç—ã', '–¢–∞—à–∫–µ–Ω—Ç'
];

// –ò–º–µ–Ω–∞ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
const sellerNames = [
  '–ï–ª–µ–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞', '–î–º–∏—Ç—Ä–∏–π –ü–µ—Ç—Ä–æ–≤', '–ê–Ω–Ω–∞ –ò–≤–∞–Ω–æ–≤–∞', '–°–µ—Ä–≥–µ–π –í–æ–ª–∫–æ–≤',
  '–ú–∞—Ä–∏—è –ù–æ–≤–∏–∫–æ–≤–∞', '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ú–æ—Ä–æ–∑–æ–≤', '–û–ª—å–≥–∞ –§–µ–¥–æ—Ä–æ–≤–∞', '–ê–Ω–¥—Ä–µ–π –ö–æ–∑–ª–æ–≤',
  '–ù–∞—Ç–∞–ª—å—è –°–º–∏—Ä–Ω–æ–≤–∞', '–ò–≥–æ—Ä—å –í–∞—Å–∏–ª—å–µ–≤', '–¢–∞—Ç—å—è–Ω–∞ –ü–∞–≤–ª–æ–≤–∞', '–ú–∏—Ö–∞–∏–ª –û—Ä–ª–æ–≤',
  '–°–≤–µ—Ç–ª–∞–Ω–∞ –ö–æ—Ä–æ–ª–µ–≤–∞', '–í–ª–∞–¥–∏–º–∏—Ä –ù–∏–∫–æ–ª–∞–µ–≤', '–ò—Ä–∏–Ω–∞ –†–æ–º–∞–Ω–æ–≤–∞', '–ê–ª–µ–∫—Å–µ–π –ú–µ–¥–≤–µ–¥–µ–≤',
  '–õ—é–¥–º–∏–ª–∞ –ì—Ä–∏–≥–æ—Ä—å–µ–≤–∞', '–Æ—Ä–∏–π –°–µ–º–µ–Ω–æ–≤', '–í–µ—Ä–∞ –ú–∞–∫–∞—Ä–æ–≤–∞', '–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–Ω –ï–≥–æ—Ä–æ–≤',
  '–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ó–∞–π—Ü–µ–≤–∞', '–î–µ–Ω–∏—Å –¢–∏—Ö–æ–Ω–æ–≤', '–ì–∞–ª–∏–Ω–∞ –ê–Ω—Ç–æ–Ω–æ–≤–∞', '–†–æ–º–∞–Ω –ë–æ—Ä–∏—Å–æ–≤',
  '–í–∞–ª–µ–Ω—Ç–∏–Ω–∞ –î–º–∏—Ç—Ä–∏–µ–≤–∞', '–ê—Ä—Ç–µ–º –ö—É–∑–Ω–µ—Ü–æ–≤', '–ù–∞–¥–µ–∂–¥–∞ –í–∏–Ω–æ–≥—Ä–∞–¥–æ–≤–∞', '–í–∏–∫—Ç–æ—Ä –ü–æ–ø–æ–≤',
  '–õ—é–±–æ–≤—å –°—Ç–µ–ø–∞–Ω–æ–≤–∞', '–ú–∞–∫—Å–∏–º –õ–µ–±–µ–¥–µ–≤', '–ó–æ—è –Ø–∫–æ–≤–ª–µ–≤–∞', '–ü–∞–≤–µ–ª –°–∏–¥–æ—Ä–æ–≤',
  '–†–∞–∏—Å–∞ –ë–µ–ª–æ–≤–∞', '–ï–≤–≥–µ–Ω–∏–π –§—Ä–æ–ª–æ–≤', '–¢–∞–º–∞—Ä–∞ –ö—Ä—ã–ª–æ–≤–∞', '–ì–µ–Ω–Ω–∞–¥–∏–π –°–æ–ª–æ–≤—å–µ–≤',
  '–õ–∞—Ä–∏—Å–∞ –ú–∏—Ö–∞–π–ª–æ–≤–∞', '–û–ª–µ–≥ –ù–æ–≤–∏–∫–æ–≤', '–í–∞–ª–µ—Ä–∏—è –ê–ª–µ–∫—Å–µ–µ–≤–∞', '–ö–∏—Ä–∏–ª–ª –ó–∞—Ö–∞—Ä–æ–≤'
];

// –û–ø–∏—Å–∞–Ω–∏—è –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Å—Ç–∏–ª–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
const descriptions = [
  '–ü—Ä–æ–¥–∞—é —Å—Ä–æ—á–Ω–æ! –ù–µ –ø–æ–¥–æ—à–ª–æ –ø–æ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º –ø–æ–∫–∞–∑–∞–Ω–∏—è–º. –ù–æ–≤–æ–µ, –∑–∞–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–µ. –ß–µ–∫–∏ –µ—Å—Ç—å. –°–∞–º–æ–≤—ã–≤–æ–∑ –∏–ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≥–æ—Ä–æ–¥—É.',
  '–ò–∑–ª–∏—à–∫–∏, –æ—Å—Ç–∞–ª–∏—Å—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –¥—Ä—É–≥—É—é —Å–∏—Å—Ç–µ–º—É. –°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ –¥–æ –∫–æ–Ω—Ü–∞ 2026 –≥–æ–¥–∞. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞. –í–æ–∑–º–æ–∂–µ–Ω —Ç–æ—Ä–≥.',
  '–ù–æ–≤–æ–µ, –∫—É–ø–ª–µ–Ω–æ –≤ –∞–ø—Ç–µ–∫–µ –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥. –ù–µ –≤—Å–∫—Ä—ã–≤–∞–ª–∏. –ï—Å—Ç—å —á–µ–∫. –¶–µ–Ω–∞ –Ω–∏–∂–µ –∞–ø—Ç–µ—á–Ω–æ–π. –°–∞–º–æ–≤—ã–≤–æ–∑, —Ü–µ–Ω—Ç—Ä –≥–æ—Ä–æ–¥–∞.',
  '–ü—Ä–æ–¥–∞—é –±/—É –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –ü–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å 2 –º–µ—Å—è—Ü–∞, –ø–æ—Ç–æ–º –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ –ø–æ–º–ø—É. –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ –∫–æ–º–ø–ª–µ–∫—Ç–µ.',
  '–°—Ä–æ—á–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞! –ü–µ—Ä–µ–µ–∑–∂–∞—é –≤ –¥—Ä—É–≥–æ–π –≥–æ—Ä–æ–¥. –í—Å—ë –Ω–æ–≤–æ–µ, –Ω–µ –≤—Å–∫—Ä—ã—Ç–æ–µ. –°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π. –¢–æ—Ä–≥ —É–º–µ—Å—Ç–µ–Ω –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –≤—ã–∫—É–ø–µ.',
  '–û—Å—Ç–∞—Ç–∫–∏ —Å–æ —Å–∫–ª–∞–¥–∞, –æ—Ä–∏–≥–∏–Ω–∞–ª 100%. –ó–∞–∫—É–ø–∞–ª–∏ –æ–ø—Ç–æ–º –¥–ª—è —Å–µ–±—è, –æ—Å—Ç–∞–ª–æ—Å—å –ª–∏—à–Ω–µ–µ. –°–∫–∏–¥–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –æ—Ç 3 —É–ø–∞–∫–æ–≤–æ–∫.',
  '–ü–æ–∫—É–ø–∞–ª–∏ –Ω–∞ –ø—Ä–æ–±—É, –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å. –†–∞—Å–ø–µ—á–∞—Ç–∞–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É —É–ø–∞–∫–æ–≤–∫—É. –û—Å—Ç–∞–ª—å–Ω–æ–µ –∑–∞–ø–µ—á–∞—Ç–∞–Ω–æ. –¶–µ–Ω–∞ –¥–æ–≥–æ–≤–æ—Ä–Ω–∞—è.',
  '–ü—Ä–æ–¥–∞—é –ø–æ—Å–ª–µ —Ä–æ–¥–æ–≤, –≥–µ—Å—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π –¥–∏–∞–±–µ—Ç –ø—Ä–æ—à—ë–ª. –¢–æ–≤–∞—Ä –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–æ–≤—ã–π, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –º–µ—Å—è—Ü. –í—Å–µ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã –≤ –∫–æ–º–ø–ª–µ–∫—Ç–µ.',
  '–ú–µ–Ω—è—é —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. –û—Å—Ç–∞–ª–∏—Å—å —Å–µ–Ω—Å–æ—Ä—ã —Å —Ö–æ—Ä–æ—à–∏–º —Å—Ä–æ–∫–æ–º (–¥–æ 08.2026). –ë—Ä–∞–ª–∏ –≤ –ï–≤—Ä–æ–ø–µ, –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–ª–∏—á–Ω–æ–µ.',
  '–ù–µ –ø–æ–¥–æ—à—ë–ª –ø–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏. –í—Å–∫—Ä—ã–ª–∏ –∫–æ—Ä–æ–±–∫—É, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏. –ü–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç, –≥–∞—Ä–∞–Ω—Ç–∏—è –¥–µ–π—Å—Ç–≤—É–µ—Ç. –ß–µ–∫ –ø—Ä–∏–ª–∞–≥–∞–µ—Ç—Å—è.',
  '–ó–∞–∫—É–ø–∏–ª–∏ –º–Ω–æ–≥–æ –ø–æ –∞–∫—Ü–∏–∏, —á–∞—Å—Ç—å –æ—Å—Ç–∞–ª–∞—Å—å –ª–∏—à–Ω—è—è. –í—Å—ë –∑–∞–ø–µ—á–∞—Ç–∞–Ω–æ, —Å—Ä–æ–∫–∏ —Å–≤–µ–∂–∏–µ. –°–∞–º–æ–≤—ã–≤–æ–∑ —Ä–∞–π–æ–Ω –º–µ—Ç—Ä–æ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—é –°–î–≠–ö.',
  '–ü—Ä–æ–¥–∞—é —Å—Ä–æ—á–Ω–æ, –Ω—É–∂–Ω—ã –¥–µ–Ω—å–≥–∏! –¢–æ–≤–∞—Ä –≤ –∏–¥–µ–∞–ª–µ, —Ö—Ä–∞–Ω–∏–ª—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°—Ä–æ–∫ –¥–æ 2027 –≥–æ–¥–∞. –í–æ–∑–º–æ–∂–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏.',
  '–ü–µ—Ä–µ—à–ª–∏ –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –æ—Ç –∫–ª–∏–Ω–∏–∫–∏. –ü—Ä–æ–¥–∞—é –∏–∑–ª–∏—à–∫–∏, –≤—Å—ë –Ω–æ–≤–æ–µ. –¶–µ–Ω–∞ —É–∫–∞–∑–∞–Ω–∞ –∑–∞ —É–ø–∞–∫–æ–≤–∫—É, –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —à—Ç—É–∫.',
  '–ú–∞–º–∞ –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –ª–µ–∂–∏—Ç –±–µ–∑ –¥–µ–ª–∞. –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–ª–∏—á–Ω–æ–µ, –≤—Å—ë —á–∏—Å—Ç–æ–µ, –≤ —Ä–æ–¥–Ω–æ–π –∫–æ—Ä–æ–±–∫–µ. –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ.',
  '–û—Å—Ç–∞–ª–∏—Å—å –æ—Ç —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞, –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ. –ù–æ–≤–æ–µ, –Ω–µ —Ä–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–µ. –•–æ—Ä–æ—à–∏–π —Å—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏. –ü—Ä–æ–¥–∞—é –¥—ë—à–µ–≤–æ, —Å—Ä–æ—á–Ω–æ –Ω—É–∂–Ω–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –º–µ—Å—Ç–æ.',
  '–ü–æ–∫—É–ø–∞–ª–∏ –ø–æ —Ä–µ—Ü–µ–ø—Ç—É, –≤—ã–ø–∏—Å–∞–ª–∏ –¥—Ä—É–≥–æ–µ. –í–µ—Ä–Ω—É—Ç—å –≤ –∞–ø—Ç–µ–∫—É –Ω–µ –ø—Ä–∏–Ω—è–ª–∏. –ê–±—Å–æ–ª—é—Ç–Ω–æ –Ω–æ–≤–æ–µ, —Å–æ –≤—Å–µ–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏. –°–∫–∏–¥–∫–∞ –ø—Ä–∏ —Å–∞–º–æ–≤—ã–≤–æ–∑–µ.',
  '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –±—Ä–∞–ª–∏ –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –º–∞–≥–∞–∑–∏–Ω–µ. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø–∞—Ä—É —Ä–∞–∑, –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ –¥—Ä—É–≥—É—é –º–∞—Ä–∫—É. –¢–æ—Ä–≥ –≤–æ–∑–º–æ–∂–µ–Ω.',
  '–ü—Ä–æ–¥–∞—é –∑–∞–ø–∞—Å—ã. –°—Ä–æ–∫ –¥–æ —Å–µ—Ä–µ–¥–∏–Ω—ã 2026. –•—Ä–∞–Ω–∏–ª–∏ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ —Å—Ç—Ä–æ–≥–æ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –°–∞–º–æ–≤—ã–≤–æ–∑ –ú–æ—Å–∫–≤–∞, —Ä–∞–π–æ–Ω –í–î–ù–•.',
  '–†–µ–±—ë–Ω–∫—É –Ω–µ –ø–æ–¥–æ—à–ª–æ, –∞–ª–ª–µ—Ä–≥–∏—è. –í—Å–∫—Ä—ã–ª–∏ –æ–¥–Ω—É —É–ø–∞–∫–æ–≤–∫—É –¥–ª—è –ø—Ä–æ–±—ã. –û—Å—Ç–∞–ª—å–Ω—ã–µ 4 –∑–∞–ø–µ—á–∞—Ç–∞–Ω—ã. –û—Ç–¥–∞–º –ø–æ –∑–∞–∫—É–ø–æ—á–Ω–æ–π —Ü–µ–Ω–µ.',
  '–í—Ä–∞—á –Ω–∞–∑–Ω–∞—á–∏–ª –¥—Ä—É–≥—É—é –¥–æ–∑–∏—Ä–æ–≤–∫—É. –≠—Ç–∏ –æ—Å—Ç–∞–ª–∏—Å—å. –í—Å—ë –Ω–æ–≤–æ–µ, –∏–∑ –∞–ø—Ç–µ–∫–∏, —á–µ–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å. –ú–æ–≥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ—á—Ç–æ–π –∏–ª–∏ –°–î–≠–ö.',
];

function randomInt(min: number, max: number): number {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function randomChoice<T>(array: T[]): T {
  return array[Math.floor(Math.random() * array.length)];
}

function generateEmail(name: string): string {
  const [firstName, lastName] = name.toLowerCase().split(' ');
  const domains = ['mail.ru', 'yandex.ru', 'gmail.com', 'inbox.ru'];
  return `${firstName}.${lastName}@${randomChoice(domains)}`;
}

async function seedMarketplace() {
  try {
    await mongoose.connect(MONGODB_URI);
    console.log('‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ MongoDB');

    // –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    await mongoose.connection.db.dropDatabase();
    console.log('‚úì –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—á–∏—â–µ–Ω–∞');

    // –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º
    const UserSchema = new mongoose.Schema({
      name: String,
      email: String,
      password: String,
      phone: String,
      city: String,
      rating: { type: Number, default: 0 },
      reviewCount: { type: Number, default: 0 },
      verificationStatus: { type: String, enum: ['none', 'pending', 'verified'], default: 'none' },
      isAdmin: { type: Boolean, default: false },
      createdAt: { type: Date, default: Date.now },
    });

    // –í–∞–∂–Ω–æ: –æ—Ç–∫–ª—é—á–∞–µ–º —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤ seed —Å–∫—Ä–∏–ø—Ç–µ
    UserSchema.pre('save', function(next) {
      next();
    });

    const ListingSchema = new mongoose.Schema({
      title: String,
      description: String,
      price: Number,
      category: String,
      city: String,
      images: [String],
      sellerId: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },
      status: { type: String, enum: ['active', 'sold', 'inactive'], default: 'active' },
      views: { type: Number, default: 0 },
      createdAt: { type: Date, default: Date.now },
    });

    const User = mongoose.model('User', UserSchema);
    const Listing = mongoose.model('Listing', ListingSchema);

    // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
    const sellers = [];
    console.log('\nüì¶ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤...');
    
    // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –≤—Ö–æ–¥–∞
    const testUser = await User.create({
      name: '–¢–∏–º—É—Ä –ù–∏–∫–æ–ª–∞–µ–≤',
      email: 'timur.v.nikolaev@gmail.com',
      password: '$2a$10$HrdyJwofCbWsBRIYA6H/V.eJx4nS5Se/6cHqR1G3p/Yk5QucUleD6', // –ø–∞—Ä–æ–ª—å: 123456
      phone: '+79991234567',
      city: '–ú–æ—Å–∫–≤–∞',
      rating: 5.0,
      reviewCount: 50,
      verificationStatus: 'verified',
      isAdmin: true,
    });
    sellers.push(testUser);
    console.log('  ‚úì –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: timur.v.nikolaev@gmail.com (–ø–∞—Ä–æ–ª—å: 123456)');
    
    for (let i = 0; i < 40; i++) {
      const name = sellerNames[i];
      const seller = await User.create({
        name,
        email: generateEmail(name),
        password: '$2a$10$dummyhash', // –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–µ–Ω –Ω–∞—Å—Ç–æ—è—â–∏–π —Ö–µ—à
        phone: `+7${randomInt(900, 999)}${randomInt(1000000, 9999999)}`,
        city: randomChoice(cities),
        rating: parseFloat((4.0 + Math.random() * 1.0).toFixed(1)), // 4.0-5.0
        reviewCount: randomInt(5, 150),
        verificationStatus: Math.random() > 0.3 ? 'verified' : 'none',
        isAdmin: false,
      });
      sellers.push(seller);
      
      if ((i + 1) % 10 === 0) {
        console.log(`  ‚úì –°–æ–∑–¥–∞–Ω–æ ${i + 1} –ø—Ä–æ–¥–∞–≤—Ü–æ–≤`);
      }
    }
    console.log(`‚úì –í—Å–µ–≥–æ —Å–æ–∑–¥–∞–Ω–æ ${sellers.length} –ø—Ä–æ–¥–∞–≤—Ü–æ–≤\n`);

    // –°–æ–∑–¥–∞–µ–º —Ç–æ–≤–∞—Ä—ã
    console.log('üì¶ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤...');
    let totalListings = 0;

    for (const seller of sellers) {
      // –ö–∞–∂–¥—ã–π –ø—Ä–æ–¥–∞–≤–µ—Ü —Å–æ–∑–¥–∞–µ—Ç –æ—Ç 3 –¥–æ 12 —Ç–æ–≤–∞—Ä–æ–≤
      const numListings = randomInt(3, 12);
      
      for (let i = 0; i < numListings; i++) {
        // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
        const categoryNames = Object.keys(categories);
        const categoryName = randomChoice(categoryNames);
        const products = categories[categoryName as keyof typeof categories];
        const product = randomChoice(products);
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ü–µ–Ω—É –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
        const [minPrice, maxPrice] = product.priceRange;
        const price = randomInt(minPrice, maxPrice);
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å—Ç–∏–ª–µ –¥–∏–∑–∞–π–Ω–∞
        const categoryEmojis: { [key: string]: string } = {
          '–ì–ª—é–∫–æ–º–µ—Ç—Ä—ã –∏ —Ç–µ—Å—Ç-–ø–æ–ª–æ—Å–∫–∏': 'ü©∏',
          '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏': 'üíâ',
          '–°–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞': 'üìä',
          '–ò–Ω—Å—É–ª–∏–Ω–æ–≤—ã–µ –ø–æ–º–ø—ã': '‚öïÔ∏è',
          '–£—Ö–æ–¥ –∑–∞ –∫–æ–∂–µ–π': 'üß¥',
          '–ì–∏–≥–∏–µ–Ω–∞ –ø–æ–ª–æ—Å—Ç–∏ —Ä—Ç–∞': 'ü¶∑',
          '–°–ø–µ—Ü. –ø–∏—Ç–∞–Ω–∏–µ': 'üçé',
          '–í–∏—Ç–∞–º–∏–Ω—ã –∏ –ë–ê–î—ã': 'üíä',
        };
        
        const emoji = categoryEmojis[categoryName] || 'üè•';
        const bgColor = 'f26642'; // primary-500
        const textColor = 'ffffff';
        const imageUrl = `https://placehold.co/600x600/${bgColor}/${textColor}/png?text=${encodeURIComponent(emoji)}`;
        
        await Listing.create({
          title: product.name,
          description: randomChoice(descriptions),
          price,
          category: categoryName,
          city: seller.city, // –ì–æ—Ä–æ–¥ –ø—Ä–æ–¥–∞–≤—Ü–∞
          images: [imageUrl],
          sellerId: seller._id,
          status: Math.random() > 0.1 ? 'active' : 'sold', // 90% –∞–∫—Ç–∏–≤–Ω—ã—Ö
          views: randomInt(10, 500),
          createdAt: new Date(Date.now() - randomInt(0, 90) * 24 * 60 * 60 * 1000), // –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 90 –¥–Ω–µ–π
        });
        
        totalListings++;
      }
    }
    
    console.log(`‚úì –°–æ–∑–¥–∞–Ω–æ ${totalListings} —Ç–æ–≤–∞—Ä–æ–≤\n`);

    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    const activeListings = await Listing.countDocuments({ status: 'active' });
    const soldListings = await Listing.countDocuments({ status: 'sold' });
    const verifiedSellers = await User.countDocuments({ verificationStatus: 'verified' });

    console.log('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:');
    console.log(`  ‚Ä¢ –ü—Ä–æ–¥–∞–≤—Ü–æ–≤: ${sellers.length}`);
    console.log(`  ‚Ä¢ –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤: ${verifiedSellers}`);
    console.log(`  ‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤: ${activeListings}`);
    console.log(`  ‚Ä¢ –ü—Ä–æ–¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤: ${soldListings}`);
    console.log(`  ‚Ä¢ –í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤: ${totalListings}`);
    console.log(`  ‚Ä¢ –ö–∞—Ç–µ–≥–æ—Ä–∏–π: ${Object.keys(categories).length}`);
    console.log(`  ‚Ä¢ –ì–æ—Ä–æ–¥–æ–≤: ${cities.length}\n`);

    // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    console.log('üì¶ –¢–æ–≤–∞—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:');
    for (const category of Object.keys(categories)) {
      const count = await Listing.countDocuments({ category, status: 'active' });
      console.log(`  ‚Ä¢ ${category}: ${count} —Ç–æ–≤–∞—Ä–æ–≤`);
    }

    console.log('\n‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!');
    
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
  } finally {
    await mongoose.disconnect();
  }
}

seedMarketplace();
