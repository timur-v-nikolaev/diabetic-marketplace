#!/bin/bash

# –î–∏–∞–±–µ—Ç-–ú–∞—Ä–∫–µ—Ç - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–º

if [ "$1" = "start" ]; then
    echo "üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å Docker..."
    docker-compose up -d
    echo "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ!"
    echo "  Frontend: http://localhost:3000"
    echo "  Backend:  http://localhost:5000"
    
elif [ "$1" = "stop" ]; then
    echo "‚èπÔ∏è  –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
    docker-compose down
    echo "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"
    
elif [ "$1" = "logs" ]; then
    echo "üìã –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:"
    docker-compose logs -f
    
elif [ "$1" = "rebuild" ]; then
    echo "üî® –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤..."
    docker-compose build
    echo "‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω—ã"
    
elif [ "$1" = "clean" ]; then
    echo "üßπ –û—á–∏—Å—Ç–∫–∞ Docker —Ä–µ—Å—É—Ä—Å–æ–≤..."
    docker-compose down -v
    echo "‚úÖ –†–µ—Å—É—Ä—Å—ã –æ—á–∏—â–µ–Ω—ã"
    
elif [ "$1" = "backend" ]; then
    echo "üîß –ó–∞–ø—É—Å–∫ backend –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏..."
    cd backend
    npm install
    npm run dev
    
elif [ "$1" = "frontend" ]; then
    echo "üé® –ó–∞–ø—É—Å–∫ frontend –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏..."
    cd frontend
    npm install
    npm run dev
    
elif [ "$1" = "help" ]; then
    echo "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
    echo "  ./manage.sh start     - –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Docker"
    echo "  ./manage.sh stop      - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
    echo "  ./manage.sh logs      - –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏"
    echo "  ./manage.sh rebuild   - –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã"
    echo "  ./manage.sh clean     - –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã"
    echo "  ./manage.sh backend   - –ó–∞–ø—É—Å—Ç–∏—Ç—å backend –ª–æ–∫–∞–ª—å–Ω–æ"
    echo "  ./manage.sh frontend  - –ó–∞–ø—É—Å—Ç–∏—Ç—å frontend –ª–æ–∫–∞–ª—å–Ω–æ"
    
else
    echo "‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: $1"
    echo "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: ./manage.sh help"
fi
